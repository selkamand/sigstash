liobrary(rvest)
library(rvest)
cosmichtml = read_html("https://cancer.sanger.ac.uk/signatures/signatures_v2")
cosmichtml
cosmichtml$doc
cosmichtml = read_html("https://cancer.sanger.ac.uk/signatures/signatures_v2")
cosmichtml |> html_elements("title")
cosmichtml |> html_elements("h2")
cosmichtml |> html_elements("h2")
h2s =cosmichtml |> html_elements("h2")
h2s
cosmichtml |> html_elements("clear signature")
cosmichtml |> html_elements("class=clear signature")
cosmichtml |> html_elements("clear signature")
cosmichtml |> html_elements(".signature")
cosmichtml |> html_elements(".signature") |> View()
cosmichtml |> html_elements(".signature")
cosmichtml |> html_elements(".signature")
cosmichtml |> html_elements(".signature") |> html_text2()
cosmichtml |> html_elements(".signature") |> html_text2()
sig30 = cosmichtml |> html_elements(".signature") |> html_text2()
sigv2s = cosmichtml |> html_elements(".signature") |> html_text2()
sigv2ss
sigv2s
sigv2s |> purrr::map_dbl(\(x){ grepl(x=x, '\\n') })
sigv2s |> purrr::map_dbl(\(x){ grepl(x=x, '\\\n') })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, '\\\n')) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, '\\\n')) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, '\n', fixed = TRUE)) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, 'n', fixed = TRUE)) })
sigv2s
sigv2s |> purrr::map_dbl(\(x){ nchar(x) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, 'n', fixed = TRUE)) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x=x, 'u', fixed = TRUE)) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x, 'u', fixed = TRUE)) })
sigv2s |> purrr::map_dbl(\(x){ sum(grepl(x = x, pattern = 'u', fixed = TRUE)) })
sigv2s |> purrr::map_dbl(\(x){ stringr::str_count(x, pattern = 'u', fixed = TRUE) })
sigv2s |> purrr::map_dbl(\(x){ stringr::str_count(x, pattern = 'u') })
sigv2s |> purrr::map_dbl(\(x){ stringr::str_count(x, pattern = '\n') })
sigv2s |> purrr::map(\(x){ strsplit(x, split = "\n") })
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) })
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) }) |> as.data.frame()
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) }) |> as.data.frame() |> View()
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) }) |> data.table::rbindlist()
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) }) |> data.table::rbindlist()
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) })\
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) })
sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) }) |> class()
l =sigv2s |> purrr::map(\(x){ unlist(strsplit(x, split = "\n")) })
do.call(rbind.data.frame, your_list)
do.call(rbind.data.frame, l)
do.call(rbind.data.frame, l) |> View()
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'cancer_type'))
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'cancer_type')) |> View()
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'rub4', 'cancer_type', 'rub5', 'aetiology', 'rub6', 'additional_mutational_features', 'rub8', 'comments')) |> View()
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'rub4', 'cancer_type', 'rub5', 'aetiology', 'rub6', 'additional_mutational_features', 'rub8', 'comments')) |> dplyr::select(-dplyr::starts_with("rub"))
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'rub4', 'cancer_type', 'rub5', 'aetiology', 'rub6', 'additional_mutational_features', 'rub8', 'comments')) |> dplyr::select(-dplyr::starts_with("rub")) |> View()
do.call(rbind.data.frame, l) |> setNames(c('signature', 'rub', 'rub2', 'rub3', 'rub4', 'cancer_type', 'rub5', 'aetiology', 'rub6', 'additional_mutational_features', 'rub8', 'comments')) |> dplyr::select(-dplyr::starts_with("rub")) |> readr::write_csv("inst/original_files/COSMIC_v2_annotations.csv")
